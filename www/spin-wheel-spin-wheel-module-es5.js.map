{"version":3,"sources":["webpack:///src/app/spin-wheel/spin-wheel.page.html","webpack:///src/app/spin-wheel/spin-wheel-routing.module.ts","webpack:///src/app/spin-wheel/spin-wheel.module.ts","webpack:///src/app/spin-wheel/spin-wheel.page.scss","webpack:///src/app/spin-wheel/spin-wheel.page.ts"],"names":["routes","path","component","SpinWheelPageRoutingModule","imports","forChild","exports","SpinWheelPageModule","declarations","SpinWheelPage","navCtrl","toast","router","stopButton","localStorage","subscribed","loggedIn","enableSpin","color","label","slices","length","sliceDeg","slowDownRand","isStopped","lock","routeReuseStrategy","shouldReuseRoute","window","getItem","JSON","parse","console","log","subscription","subscriptionVerified","alert","speed","deg","rand","canvas","document","createElement","width","center","ctx","myCanvas","nativeElement","getContext","drawImg","min","max","Math","random","PI","beginPath","fillStyle","moveTo","arc","deg2rad","lineTo","fill","text","save","translate","rotate","textAlign","font","fillText","restore","clearRect","i","drawSlice","drawText","ai","floor","requestAnimationFrame","anim","bind","subscribeToast","loginToast","message","create","duration","present","buttons","role","handler","navigate","email","selector","template"],"mappings":"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","file":"spin-wheel-spin-wheel-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-buttons>\\n    <ion-back-button></ion-back-button>\\n  </ion-buttons>\\n  <ion-toolbar>\\n    <ion-title style=\\\"font-size: x-large;\\\">Spin To Win</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<!-- <ion-header>\\n\\n  <ion-navbar>\\n    <ion-title>Spin Wheel</ion-title>\\n  </ion-navbar>\\n\\n</ion-header> -->\\n\\n\\n<ion-content no-padding>\\n  <!-- <span>\\n    <p>\\n      Try your luck to get discount coupon\\n      1 spin per email\\n      No cheating\\n    </p>\\n  </span> -->\\n  <ion-row style=\\\"margin-top:10%;margin-left:9%;\\\">\\n    <ion-col col-12 text-center>\\n      <div id=\\\"wheel\\\">\\n        <canvas #myCanvas width=\\\"auto\\\" height=\\\"300\\\"></canvas>\\n      </div>\\n    </ion-col>\\n    <!-- <ion-col offset-1 col-10> -->\\n      <!-- <button #spin class=\\\"stopButton\\\" (click)=\\\"onStartClick()\\\">Start</button> -->\\n  <!-- </ion-col> -->\\n\\n    <div class=\\\"form-container\\\">\\n      <ion-item>\\n        <ion-label position=\\\"floating\\\">Email</ion-label>\\n        <ion-input [(ngModel)]=\\\"email\\\"  color=\\\"dark\\\" fill=\\\"clear\\\"></ion-input>\\n      </ion-item>\\n      <!-- <ion-item>\\n        <ion-label position=\\\"floating\\\">Password</ion-label>\\n        <ion-input type=\\\"password\\\" [(ngModel)]=\\\"password\\\"  color=\\\"dark\\\" fill=\\\"clear\\\"></ion-input>\\n      </ion-item> -->\\n\\n      <ion-button [disabled]=\\\"validateEmail()\\\" expand=\\\"block\\\" class=\\\"main-button\\\" (click)=\\\"onStartClick()\\\">\\n        <span *ngIf=\\\"!isLoading\\\">TRY YOUR LUCK</span>\\n        <!-- <span *ngIf=\\\"isLoading\\\">Loading...</span> -->\\n      </ion-button>\\n\\n      <ion-button [disabled]=\\\"validateStopButton()\\\" expand=\\\"block\\\" class=\\\"main-button\\\" (click)=\\\"onStopClick()\\\">\\n        <span *ngIf=\\\"!isLoading\\\">STOP</span>\\n      </ion-button>\\n\\n      <!-- <div class=\\\"sign-up\\\">\\n        Don't have an account? <ion-button color=\\\"dark\\\" fill=\\\"clear\\\" routerLink=\\\"/signup\\\" routerDirection=\\\"forward\\\">Sign up</ion-button>\\n      </div>\\n\\n      <div class=\\\"sign-up\\\">\\n        <ion-button color=\\\"dark\\\" fill=\\\"clear\\\" routerLink=\\\"/home\\\" routerDirection=\\\"forward\\\">Go To Home</ion-button>\\n      </div> -->\\n    </div>\\n\\n\\n  </ion-row>\\n</ion-content>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SpinWheelPage } from './spin-wheel.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SpinWheelPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SpinWheelPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SpinWheelPageRoutingModule } from './spin-wheel-routing.module';\n\nimport { SpinWheelPage } from './spin-wheel.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    SpinWheelPageRoutingModule\n  ],\n  declarations: [SpinWheelPage]\n})\nexport class SpinWheelPageModule {}\n","export default \".bg-color {\\n  --ion-background-color: #189A7A !important ;\\n}\\n\\n.form-container {\\n  margin-top: 5%;\\n  margin-left: 10%;\\n}\\n\\n.form-container ion-item {\\n  --padding-start: 0;\\n  --border-color: #DADADA;\\n}\\n\\n.form-container ion-item ion-label {\\n  color: #A6A6A6;\\n}\\n\\n.form-container ion-item ion-icon {\\n  margin-top: auto;\\n  color: #c6cbd4;\\n}\\n\\n.form-container ion-button {\\n  margin-top: 10%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvc3Bpbi13aGVlbC9zcGluLXdoZWVsLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLDJDQUFBO0FBQ0o7O0FBRUE7RUFDSSxjQUFBO0VBQ0EsZ0JBQUE7QUFDSjs7QUFFQTtFQUNJLGtCQUFBO0VBQ0EsdUJBQUE7QUFDSjs7QUFFQTtFQUNJLGNBQUE7QUFDSjs7QUFFQTtFQUNJLGdCQUFBO0VBQ0EsY0FBQTtBQUNKOztBQUVBO0VBQ0ksZUFBQTtBQUNKIiwiZmlsZSI6InNyYy9hcHAvc3Bpbi13aGVlbC9zcGluLXdoZWVsLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5iZy1jb2xvciB7XHJcbiAgICAtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yOiAjMTg5QTdBICFpbXBvcnRhbnRcclxufVxyXG5cclxuLmZvcm0tY29udGFpbmVyIHtcclxuICAgIG1hcmdpbi10b3A6IDUlO1xyXG4gICAgbWFyZ2luLWxlZnQ6IDEwJTtcclxufVxyXG5cclxuLmZvcm0tY29udGFpbmVyIGlvbi1pdGVtIHtcclxuICAgIC0tcGFkZGluZy1zdGFydDogMDtcclxuICAgIC0tYm9yZGVyLWNvbG9yOiAjREFEQURBO1xyXG59XHJcblxyXG4uZm9ybS1jb250YWluZXIgaW9uLWl0ZW0gaW9uLWxhYmVsIHtcclxuICAgIGNvbG9yOiAjQTZBNkE2O1xyXG59XHJcblxyXG4uZm9ybS1jb250YWluZXIgaW9uLWl0ZW0gaW9uLWljb24ge1xyXG4gICAgbWFyZ2luLXRvcDogYXV0bztcclxuICAgIGNvbG9yOiAjYzZjYmQ0O1xyXG59XHJcblxyXG4uZm9ybS1jb250YWluZXIgaW9uLWJ1dHRvbiB7XHJcbiAgICBtYXJnaW4tdG9wOiAxMCU7XHJcbn0iXX0= */\";","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\n  import { ToastController, NavController } from '@ionic/angular';\nimport { Router, NavigationExtras } from '@angular/router';\n\n\n@Component({\n  selector: 'app-spin-wheel',\n  templateUrl: './spin-wheel.page.html',\n  styleUrls: ['./spin-wheel.page.scss'],\n})\n\nexport class SpinWheelPage implements OnInit {\n  @ViewChild('myCanvas') myCanvas: ElementRef;\n  @ViewChild('spin') spin: ElementRef;\n  public ctx: CanvasRenderingContext2D;\n\n  email: string;\n  stopButton: boolean = false;\n  localStorage: any =[];\n  subscribed:boolean = false;\n  loggedIn: boolean = false;\n  enableSpin: boolean = true;\n\n\n  color = ['#E65100', '#FFB74D', '#FB8C00', '#E65100', '#FFE0B2', '#E65100', \"#FFE0B2\", \"#E65100\"];\n  label = ['80% OFF', '90% OFF', 'Free T-Shirt', 'Not Lucky', '10% OFF', 'Free Iphone', '20% Off', 'Free Laptop'];\n  slices = this.color.length;\n  sliceDeg = 360 / this.slices;\n  deg: any;\n  public speed: any;\n  slowDownRand: any = 0;\n  isStopped:any = false;\n  width: any;\n  center: any;\n  lock = false;\n  constructor(public navCtrl: NavController,private toast: ToastController,private router: Router) {\n    this.router.routeReuseStrategy.shouldReuseRoute = function() {\n      this.localStorage = window.localStorage.getItem('user');\n    this.localStorage = JSON.parse(this.localStorage);\n    console.log(\"spin wheel user\", this.localStorage);\n    if(this.localStorage) {\n    this.subscribed = this.localStorage.subscription == true && this.localStorage.subscriptionVerified == true ? true : false;\n    this.loggedIn =  true;\n    alert(this.loggedIn);\n\n    }\n    else {\n      this.loggedIn = false\n       }\n       return false;\n  };\n    this.speed = 0;\n    this.deg = this.rand(0, 360);\n    let canvas = document.createElement('canvas');\n    this.width = canvas.width; // size\n    this.center = this.width / 2;      // center\n\n  }\n\n\n  async ngOnInit() {\n\n    this.localStorage = window.localStorage.getItem('user');\n    this.localStorage = JSON.parse(this.localStorage);\n    console.log(\"spin wheel user\", this.localStorage);\n    if(this.localStorage) {\n    this.subscribed = this.localStorage.subscription == true && this.localStorage.subscriptionVerified == true ? true : false;\n    this.loggedIn =  true;\n    }\n    else {\n      this.loggedIn = false\n       }\n    }\n\n  ngAfterViewInit(): void {\n    // alert(\"here\")\n    // this.localStorage = window.localStorage.getItem('user');\n    // this.localStorage = JSON.parse(this.localStorage);\n    // console.log(\"spin wheel user\", this.localStorage);\n\n    // if(this.localStorage) {\n    // this.subscribed = this.localStorage.subscription == true && this.localStorage.subscriptionVerified == true ? true : false;\n    // this.loggedIn =  true;\n    // }\n    // else {\n    //   this.loggedIn = false\n    //    }\n    this.ctx = (<HTMLCanvasElement>this.myCanvas.nativeElement).getContext('2d');\n    this.drawImg();\n    // this.anim();\n  }\n\n  rand(min, max) {\n    return Math.random() * (max - min) + min;\n  }\n  deg2rad(deg) {\n    return deg * Math.PI / 180;\n  }\n  drawSlice(deg, color) {\n    this.ctx.beginPath();\n    this.ctx.fillStyle = color;\n    this.ctx.moveTo(this.center, this.center);\n    this.ctx.arc(this.center, this.center, this.width / 2, this.deg2rad(deg), this.deg2rad(deg + this.sliceDeg));\n    this.ctx.lineTo(this.center, this.center);\n    this.ctx.fill();\n  }\n\n  drawText(deg, text) {\n    this.ctx.save();\n    this.ctx.translate(this.center, this.center);\n    this.ctx.rotate(this.deg2rad(deg));\n    this.ctx.textAlign = \"right\";\n    this.ctx.fillStyle = \"#fff\";\n    this.ctx.font = '20px sans-serif';\n    this.ctx.fillText(text, 130, 10);\n    this.ctx.restore();\n  }\n\n  drawImg() {\n    this.ctx.clearRect(0, 0, this.width, this.width);\n    for (var i = 0; i < this.slices; i++) {\n      this.drawSlice(this.deg, this.color[i]);\n      this.drawText(this.deg + this.sliceDeg / 2, this.label[i]);\n      this.deg += this.sliceDeg;\n    }\n  }\n  anim() {\n    this.deg += this.speed;\n    this.deg %= 360;\n\n    // Increment speed\n    if (!this.isStopped && this.speed < 3) {\n      this.speed = this.speed + 1 * 0.1;\n    }\n    // Decrement Speed\n    if (this.isStopped) {\n      if (!this.lock) {\n        this.lock = true;\n        this.slowDownRand = this.rand(0.994, 0.998);\n      }\n      this.speed = this.speed > 0.2 ? this.speed *= this.slowDownRand : 0;\n    }\n    // Stopped!\n    if (this.lock && !this.speed) {\n      var ai = Math.floor(((360 - this.deg - 90) % 360) / this.sliceDeg); // deg 2 Array Index\n      ai = (this.slices + ai) % this.slices; // Fix negative index\n      return alert(\"You got:\\n\" + this.label[ai]); // Get Array Item from end Degree\n    }\n\n    this.drawImg();\n    window.requestAnimationFrame(this.anim.bind(this));\n  };\n\n  onStopClick(){\n      this.isStopped = true;\n      this.stopButton = false;\n  }\n\n  onStartClick(){\nconsole.log(\"this.subscribed\", this.subscribed)\nconsole.log(\"this.loggedIn\", this.loggedIn)\n    if(this.subscribed == true && this.loggedIn == true)\n   {\n    this.enableSpin = false;\n    this.stopButton = true;\n    this.anim();\n   }\n    else if(this.loggedIn == true && this.subscribed == false)\n    {\n      this.subscribeToast(\n        \"Please Subscribe to purchase the item\",\n        \"warning\"\n        );\n    }\n    else if (this.loggedIn == false) {\n      this.loginToast(\n        \"Please login to view the item\",\n        \"warning\"\n        );\n    }\n  }\n\n  async subscribeToast(message: string, color: string) {\n    const toast = await this.toast.create({\n      message: message,\n      color: color,\n      duration: 2000\n    });\n    toast.present();\n  }\n\n  async loginToast(message: string, color: string) {\n    const toast = await this.toast.create({\n      message: message,\n      color: color,\n      duration: 7000,\n      buttons: [\n        {\n          text: 'Login',\n          role: 'cancel',\n          handler: () => {\n            console.log('Cancel clicked');\n            this.router.navigate(['/login']);\n          }\n\n        }\n      ]\n      \n    });\n    toast.present();\n  }\n\n  validateEmail() {\n    if (!this.email && this.enableSpin == true)\n      return true;\n    else\n      return false;\n  }\n\n  validateStopButton() {\n    if(this.stopButton !=  true)\n    return true;\n    else \n    return false;\n  }\n\n}"]}